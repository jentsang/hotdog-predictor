<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.7.33">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">

<meta name="author" content="Zaki Aslam, Hector Palafox Prieto, Jennifer Tsang, &amp; Samrawit Mezgebo Tsegay">
<meta name="dcterms.date" content="2025-12-07">

<title>Predicting food specialization from a food vendors’ names.</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
/* CSS for citations */
div.csl-bib-body { }
div.csl-entry {
  clear: both;
  margin-bottom: 0em;
}
.hanging-indent div.csl-entry {
  margin-left:2em;
  text-indent:-2em;
}
div.csl-left-margin {
  min-width:2em;
  float:left;
}
div.csl-right-inline {
  margin-left:2em;
  padding-left:1em;
}
div.csl-indent {
  margin-left: 2em;
}</style>


<script src="dog_or_not_report_files/libs/clipboard/clipboard.min.js"></script>
<script src="dog_or_not_report_files/libs/quarto-html/quarto.js" type="module"></script>
<script src="dog_or_not_report_files/libs/quarto-html/tabsets/tabsets.js" type="module"></script>
<script src="dog_or_not_report_files/libs/quarto-html/popper.min.js"></script>
<script src="dog_or_not_report_files/libs/quarto-html/tippy.umd.min.js"></script>
<script src="dog_or_not_report_files/libs/quarto-html/anchor.min.js"></script>
<link href="dog_or_not_report_files/libs/quarto-html/tippy.css" rel="stylesheet">
<link href="dog_or_not_report_files/libs/quarto-html/quarto-syntax-highlighting-ea385d0e468b0dd5ea5bf0780b1290d9.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="dog_or_not_report_files/libs/bootstrap/bootstrap.min.js"></script>
<link href="dog_or_not_report_files/libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="dog_or_not_report_files/libs/bootstrap/bootstrap-81267100e462c21b3d6c0d5bf76a3417.min.css" rel="stylesheet" append-hash="true" id="quarto-bootstrap" data-mode="light">

  <script src="https://cdnjs.cloudflare.com/polyfill/v3/polyfill.min.js?features=es6"></script>
  <script src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-chtml-full.js" type="text/javascript"></script>

<script type="text/javascript">
const typesetMath = (el) => {
  if (window.MathJax) {
    // MathJax Typeset
    window.MathJax.typeset([el]);
  } else if (window.katex) {
    // KaTeX Render
    var mathElements = el.getElementsByClassName("math");
    var macros = [];
    for (var i = 0; i < mathElements.length; i++) {
      var texText = mathElements[i].firstChild;
      if (mathElements[i].tagName == "SPAN") {
        window.katex.render(texText.data, mathElements[i], {
          displayMode: mathElements[i].classList.contains('display'),
          throwOnError: false,
          macros: macros,
          fleqn: false
        });
      }
    }
  }
}
window.Quarto = {
  typesetMath
};
</script>

</head>

<body class="quarto-light">

<div id="quarto-content" class="page-columns page-rows-contents page-layout-article">
<div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
  <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">Table of contents</h2>
   
  <ul>
  <li><a href="#summary" id="toc-summary" class="nav-link active" data-scroll-target="#summary">Summary</a></li>
  <li><a href="#introduction" id="toc-introduction" class="nav-link" data-scroll-target="#introduction">Introduction</a></li>
  <li><a href="#methods" id="toc-methods" class="nav-link" data-scroll-target="#methods">Methods</a>
  <ul class="collapse">
  <li><a href="#data" id="toc-data" class="nav-link" data-scroll-target="#data">Data</a></li>
  <li><a href="#analysis" id="toc-analysis" class="nav-link" data-scroll-target="#analysis">Analysis</a>
  <ul class="collapse">
  <li><a href="#eda" id="toc-eda" class="nav-link" data-scroll-target="#eda">EDA</a></li>
  <li><a href="#baseline" id="toc-baseline" class="nav-link" data-scroll-target="#baseline">Baseline</a></li>
  </ul></li>
  </ul></li>
  <li><a href="#results" id="toc-results" class="nav-link" data-scroll-target="#results">Results</a>
  <ul class="collapse">
  <li><a href="#eda-1" id="toc-eda-1" class="nav-link" data-scroll-target="#eda-1">EDA</a></li>
  <li><a href="#baseline-1" id="toc-baseline-1" class="nav-link" data-scroll-target="#baseline-1">Baseline</a></li>
  <li><a href="#decision-tree" id="toc-decision-tree" class="nav-link" data-scroll-target="#decision-tree">Decision Tree</a></li>
  <li><a href="#logistic-regression" id="toc-logistic-regression" class="nav-link" data-scroll-target="#logistic-regression">Logistic Regression</a></li>
  <li><a href="#naïve-bayes" id="toc-naïve-bayes" class="nav-link" data-scroll-target="#naïve-bayes">Naïve-Bayes</a></li>
  <li><a href="#model-comparisons" id="toc-model-comparisons" class="nav-link" data-scroll-target="#model-comparisons">Model Comparisons</a></li>
  <li><a href="#best-model-hyperparameter-optimisation" id="toc-best-model-hyperparameter-optimisation" class="nav-link" data-scroll-target="#best-model-hyperparameter-optimisation">Best Model Hyperparameter Optimisation</a></li>
  </ul></li>
  <li><a href="#discussion" id="toc-discussion" class="nav-link" data-scroll-target="#discussion">Discussion</a></li>
  <li><a href="#references" id="toc-references" class="nav-link" data-scroll-target="#references">References</a></li>
  </ul>
<div class="quarto-alternate-formats"><h2>Other Formats</h2><ul><li><a href="dog_or_not_report.pdf"><i class="bi bi-file-pdf"></i>PDF</a></li></ul></div></nav>
</div>
<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title">Predicting food specialization from a food vendors’ names.</h1>
<p class="subtitle lead">A comprehensive classifier analysis on the association of vendor names with its description</p>
</div>



<div class="quarto-title-meta">

    <div>
    <div class="quarto-title-meta-heading">Author</div>
    <div class="quarto-title-meta-contents">
             <p>Zaki Aslam, Hector Palafox Prieto, Jennifer Tsang, &amp; Samrawit Mezgebo Tsegay </p>
          </div>
  </div>
    
    <div>
    <div class="quarto-title-meta-heading">Published</div>
    <div class="quarto-title-meta-contents">
      <p class="date">December 7, 2025</p>
    </div>
  </div>
  
    
  </div>
  


</header>


<section id="summary" class="level1">
<h1>Summary</h1>
<p>In this project, we used decision trees, logistic regression, and a Naive Bayes classifier to identify whether or not a food vendor sells hot dogs via their name. We trained each model individually using a cross-validation setup, and we compared the scores of the accuracy in order to determine a model to train and to compare to the test data. The model we chose, finally, was the Naive Bayes, as it provided a slightly better score and less underfit and overfit than the other models present. Finally, we validated it with our test data and came to the conclusion that even though it is good enough for classifying most of the cases, it still struggles discerning from the minority class, which in our case, is our target.</p>
<p><span style="color:red;">Add results into the Summary section</span></p>
</section>
<section id="introduction" class="level1">
<h1>Introduction</h1>
<p>Food trucks and mobile food vendors are a common sight in Downtown Vancouver, offering a wide range of cuisine types from hot dogs and burgers to shawarma and tacos. With so many different vendors and food options, it can be useful to automatically identify what kind of food a vendor specializes in based only on select information. In this project, we study whether we can predict if a food vendor is a hot dog vendor or not using the vendor’s business name. We used a publicly available dataset of mobile food vendors in Vancouver from the City of Vancouver’s open data portal, where each row represents relevant information for a single food vendor and includes columns such as BUSINESS_NAME, LOCATION, DESCRIPTION, GEO_LOCALAREA, and geographic coordinates. For our analysis, we constructed a binary target variable named is_hotdog, which is True when the DESCRIPTION is “Hot Dogs” and False otherwise. This allows us to investigate how much information about the type of food a vendor sells can be extracted from the business name, as well as putting to test the prediction power of some of the most common classification algorithms: Decision Trees, Logistic Regression, and Naïve-Bayes.</p>
<p><span style="color:red;">Add references (food vendors/trucks in vancouver) into the Intro section, it is impoart to know the category of food distributed through out vancouver for new liscencing, the public can find it easily and we can ensure an even distribution of different categories of food. In this case, we will be focused on predicting hotdogs</span></p>
</section>
<section id="methods" class="level1">
<h1>Methods</h1>
<section id="data" class="level2">
<h2 class="anchored" data-anchor-id="data">Data</h2>
<p>The data set used in this project is Street food vending created by the City of Vancouver<span class="citation" data-cites="CityOfVancouverStreetFood">(<a href="#ref-CityOfVancouverStreetFood" role="doc-biblioref">Vancouver 2025b</a>)</span>. It was sourced from the City of Vancouver Open Data Portal<span class="citation" data-cites="CityOfVancouverOpenData">(<a href="#ref-CityOfVancouverOpenData" role="doc-biblioref">Vancouver 2025a</a>)</span> and can be found <a href="https://opendata.vancouver.ca/explore/dataset/food-vendors/table/">here</a>. Each row in the dataset represents a food vendor and includes information such as the business name, description, and location. In this project, we derive the binary target is_hotdog from the DESCRIPTION column (“Hot Dogs” vs other descriptions) and use the BUSINESS_NAME as the main predictor in our models.</p>
<p>Before splitting the data into training and test sets and fitting models, we perform basic data validation on the raw tabular data to check that it is well-formed and consistent with our expectations. We expect the food-vendors data to come from a CSV file that can be read into a non-empty pandas DataFrame. If the download fails or the file is not in the expected tabular format, we want the analysis to stop early instead of producing confusing errors later.</p>
</section>
<section id="analysis" class="level2">
<h2 class="anchored" data-anchor-id="analysis">Analysis</h2>
<p>Performed EDA, and 4 different models to compare before choosing the best score for evalution…</p>
<p>We chose to split our data with 70% used for training and 30% used for test evaluation.</p>
<section id="eda" class="level3">
<h3 class="anchored" data-anchor-id="eda">EDA</h3>
<p>Given that we are interested in solely the classification power of the name, we will be taking a look more into the classes present into our training set.</p>
</section>
<section id="baseline" class="level3">
<h3 class="anchored" data-anchor-id="baseline">Baseline</h3>
<p>We will be using a dummy classifier as a baseline to compare our different models. For this and all our models we will use 5 cross validation folds.</p>
<p>For this analysis we will implement a CountVectorizer object to create a bag of words (BOW). This method will split each individual word in the names of the businesses into its own individual columns, and will assess whether or not the word is present in the data set.</p>
<p>We will then pass this CountVectorizer into a pipeline with the different models we want to test:</p>
<p>DummyClassifier: This will be our baseline to check on how we will predict whether or not the vendor sells hot dogs or not. DecisionTreeClassifier: This simple model will help us identify if simple decisions map out the relationship of the names to the category. LogisticRegression: This model will help us identify if there are linear relationships in the model, and which tokens are more relevant for our classification. BernoulliNB (Naïve-Bayes): This model is quick to fit and train, and uses a probabilistic approach to the classification, and it would be interesting to see how it fares in comparison to the rest of them. After performing the evaluation for each model, we will compare them all together and train the best one, optimising its hyperparameters. We will score based on the model accuracy (correct predictions over total predictions), as this is just a simple experiment to validate the relationship of these 2 variables.</p>
<p>With the best model, we will take a peek on how it performs on the test data, and evaluate our conclusions.</p>
</section>
</section>
</section>
<section id="results" class="level1">
<h1>Results</h1>
<section id="eda-1" class="level3">
<h3 class="anchored" data-anchor-id="eda-1">EDA</h3>
<p><span style="color:red;">Add EDA results here</span></p>
<p>When visualizing our EDA <span class="citation" data-cites="W3SchoolsCSSColors">(<a href="#ref-W3SchoolsCSSColors" role="doc-biblioref">W3Schools 2025</a>)</span> we can notice several key points. From <a href="#fig-most-common-cuisine" class="quarto-xref">Figure&nbsp;1</a>, we can see that of all the cuisine types from Downtown Vancouver food vendors, hot dog stands seem to be the most common of them all. It is also very important to analyze our classes before starting our work. When you have a large class imbalance, a lot of the times your model will give you a score that is not representative of whether or not your model works well. For example, if you observe the second plot for a data set where one class is represented in a much higher proportion than the other, a model like DummyClassifier will give you an extremely high score. This isn’t because the model works perfectly it’s because it’ll always predict the higher represented class! Yet we can see from <a href="#fig-class-imbalance" class="quarto-xref">Figure&nbsp;2</a> that we do not have that issue as much here as the class imbalance isn’t too severed. Lastly, we noticed that there were some initial blanks in the BUSINESS_NAME which we addressed by changing it to an empty space (and thus not screwing up the CountVectorizer instance we will need for this analysis). We can observe from <span class="citation" data-cites="blank-names">(<a href="#ref-blank-names" role="doc-biblioref"><strong>blank-names?</strong></a>)</span> that all the cases of a blank BUSINESS_NAME are belong to Hot Dog vendors, which would be something we would like our models to capture. Finally, we would expect for our classifier to be able to identify the “easy” base case of having no name, since this is a relevant discriminator for both our classes.</p>
<div id="fig-most-common-cuisine" class="quarto-float quarto-figure quarto-figure-center anchored">
<figure class="quarto-float quarto-float-fig figure">
<div aria-describedby="fig-most-common-cuisine-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<img src="../results/figures/dummy_images.png" class="img-fluid figure-img" style="width:70.0%">
</div>
<figcaption class="quarto-float-caption-bottom quarto-float-caption quarto-float-fig" id="fig-most-common-cuisine-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Figure&nbsp;1: Most common cuisine types among food vendors in Downtown Vancouver.
</figcaption>
</figure>
</div>
<div id="fig-class-imbalance" class="quarto-float quarto-figure quarto-figure-center anchored">
<figure class="quarto-float quarto-float-fig figure">
<div aria-describedby="fig-class-imbalance-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<img src="../results/figures/dummy_images.png" class="img-fluid figure-img" style="width:70.0%">
</div>
<figcaption class="quarto-float-caption-bottom quarto-float-caption quarto-float-fig" id="fig-class-imbalance-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Figure&nbsp;2: Class imbalance in training data.
</figcaption>
</figure>
</div>
<div id="fig-blank-names" class="quarto-float quarto-figure quarto-figure-center anchored">
<figure class="quarto-float quarto-float-fig figure">
<div aria-describedby="fig-blank-names-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<img src="../results/figures/dummy_images.png" class="img-fluid figure-img" style="width:70.0%">
</div>
<figcaption class="quarto-float-caption-bottom quarto-float-caption quarto-float-fig" id="fig-blank-names-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Figure&nbsp;3: Blank names relevance in classification.
</figcaption>
</figure>
</div>
</section>
<section id="baseline-1" class="level3">
<h3 class="anchored" data-anchor-id="baseline-1">Baseline</h3>
<p><span style="color:red;">Code result value of 0.65 here</span></p>
<p>As expected, we can see from <strong>?@tbl-dummy-cv</strong> the dummy consistently predicts the majority class, with accuracy of around {python} dummy_accuracy, being consistent with the representation of our split.</p>
</section>
<section id="decision-tree" class="level3">
<h3 class="anchored" data-anchor-id="decision-tree">Decision Tree</h3>
<p><span style="color:red;">update code result value here</span></p>
<p>Here we are training a simple decision tree to identify whether the vendor sells hot dogs or not. This is a simple model with easy to interpret coefficients, and it would be interesting checking whether or not it correctly identified some of the most relevant clues (something like “Joe’s Hot Dogs” being correctly classified, for instance).</p>
<p>From <strong>?@tbl-decisiontree-cv</strong>, we can see that the decision tree performs worse than the dummy classifier, as it is overfitting the prediction, which is evident in the substantial gap between the validation and training scores (around {python} decisiontree_accuracy difference for all folds).</p>
<p><span style="color:red;">update code result for 34 levels here</span></p>
<p>By taking a look at the depths and tree structure from <a href="#fig-decision-tree-structure" class="quarto-xref">Figure&nbsp;4</a> to better understand these discrepancies. As we can see, the model contains <strong>34</strong> levels of decisions, yet, the level of specificity (given that we are using a bag of words) makes it perform poorly. Here we can see (figure 4) the most discriminating factors. We can observe some sensible initial discriminations, such as “dogs”, “japadog” and “dog”, which would quickly identify the vendor as a Hot Dog place.</p>
<div id="fig-decision-tree-structure" class="quarto-float quarto-figure quarto-figure-center anchored">
<figure class="quarto-float quarto-float-fig figure">
<div aria-describedby="fig-decision-tree-structure-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<img src="../results/figures/dummy_images.png" class="img-fluid figure-img" style="width:70.0%">
</div>
<figcaption class="quarto-float-caption-bottom quarto-float-caption quarto-float-fig" id="fig-decision-tree-structure-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Figure&nbsp;4: Decision tree structure (limited to the first 5 levels of the depth).
</figcaption>
</figure>
</div>
<p>Here we can observe <a href="#fig-decision-tree-cm" class="quarto-xref">Figure&nbsp;5</a> and misses in the cross validation of the model trained. We can observe that the model is very good at identifying when something seems “Hot-Doggy”, yet, it produces a high degree of false positives. We can observe some of the mistakes below (table 8). Here we are seeing that the model tends to predict most of the time that the vendor is a hot dog stand, with probably the only reasonable exception being Van Dog.</p>
<div id="fig-decision-tree-cm" class="quarto-float quarto-figure quarto-figure-center anchored">
<figure class="quarto-float quarto-float-fig figure">
<div aria-describedby="fig-decision-tree-cm-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<img src="../results/figures/dummy_images.png" class="img-fluid figure-img" style="width:70.0%">
</div>
<figcaption class="quarto-float-caption-bottom quarto-float-caption quarto-float-fig" id="fig-decision-tree-cm-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Figure&nbsp;5: Confusion matrix for the Decision Tree.
</figcaption>
</figure>
</div>
<p>Table 8: Mismatches for Decision Tree.</p>
<p><span style="color:red;">add table</span></p>
</section>
<section id="logistic-regression" class="level3">
<h3 class="anchored" data-anchor-id="logistic-regression">Logistic Regression</h3>
<p>Here we will train a logistic regression in order to see whether or not we can improve our accuracy and reduce the possible overfitting. This model also has the advantage of having interpretable parameters, which in our case relate how often each of our features is associated with the target variable (<code>is_hotdog = True</code>).</p>
<div class="cell" data-execution_count="4">
<div id="tbl-lr-cv" class="cell quarto-float quarto-figure quarto-figure-center anchored" data-execution_count="4">
<figure class="quarto-float quarto-float-tbl figure">
<figcaption class="quarto-float-caption-top quarto-float-caption quarto-float-tbl" id="tbl-lr-cv-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Table&nbsp;1: Logistic regression cross validation scores and times.
</figcaption>
<div aria-describedby="tbl-lr-cv-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<div class="cell-output cell-output-display cell-output-markdown" data-execution_count="47">
<table class="do-not-create-environment cell caption-top table table-sm table-striped small">
<thead>
<tr class="header">
<th style="text-align: right;">fit_time</th>
<th style="text-align: right;">score_time</th>
<th style="text-align: right;">test_score</th>
<th style="text-align: right;">train_score</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: right;">0.0547</td>
<td style="text-align: right;">0.002</td>
<td style="text-align: right;">0.6923</td>
<td style="text-align: right;">0.8</td>
</tr>
<tr class="even">
<td style="text-align: right;">0.0039</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0.7692</td>
<td style="text-align: right;">0.82</td>
</tr>
<tr class="odd">
<td style="text-align: right;">0</td>
<td style="text-align: right;">0.005</td>
<td style="text-align: right;">0.7692</td>
<td style="text-align: right;">0.82</td>
</tr>
<tr class="even">
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0.9167</td>
<td style="text-align: right;">0.7843</td>
</tr>
<tr class="odd">
<td style="text-align: right;">0.009</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0.75</td>
<td style="text-align: right;">0.8235</td>
</tr>
</tbody>
</table>
</div>
</div>
</figure>
</div>
</div>
<p>From <a href="#tbl-lr-cv" class="quarto-xref">Table&nbsp;1</a> We can see a slight improvement in generalisation from the decision tree, but it performs not much better than the dummy regressor with an average validation score of np.float64(0.779). This could indicate that there may not be a single independent linear relationship in the token features to the target. Also it is worth noting that the model has a lot variability between folds.</p>
<p>From <a href="#tbl-lr-coef" class="quarto-xref">Table&nbsp;2</a> and <a href="#fig-lr-top5" class="quarto-xref">Figure&nbsp;6</a>, we can see that the coefficients associated roughly match with the choices determined by the decision tree, with “japadog”, “dog”, and “dogs” being relevant. Yet if we observe the intercept, we see the model is heavily biased into making a negative prediction. Thus, we would not expect the model being good in identifying hot dog places in particular.</p>
<p>The number of coefficients produced is <strong>95</strong></p>
<p>The intercept is <strong>-0.33</strong></p>
<div class="cell" data-execution_count="5">
<div id="tbl-lr-coef" class="cell quarto-float quarto-figure quarto-figure-center anchored" data-execution_count="5">
<figure class="quarto-float quarto-float-tbl figure">
<figcaption class="quarto-float-caption-top quarto-float-caption quarto-float-tbl" id="tbl-lr-coef-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Table&nbsp;2: Coefficients of the logistic regression.
</figcaption>
<div aria-describedby="tbl-lr-coef-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<div class="cell-output cell-output-display cell-output-markdown" data-execution_count="48">
<table class="do-not-create-environment cell caption-top table table-sm table-striped small">
<thead>
<tr class="header">
<th style="text-align: right;">fit_time</th>
<th style="text-align: right;">score_time</th>
<th style="text-align: right;">test_score</th>
<th style="text-align: right;">train_score</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: right;">0.0547</td>
<td style="text-align: right;">0.002</td>
<td style="text-align: right;">0.6923</td>
<td style="text-align: right;">0.8</td>
</tr>
<tr class="even">
<td style="text-align: right;">0.0039</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0.7692</td>
<td style="text-align: right;">0.82</td>
</tr>
<tr class="odd">
<td style="text-align: right;">0</td>
<td style="text-align: right;">0.005</td>
<td style="text-align: right;">0.7692</td>
<td style="text-align: right;">0.82</td>
</tr>
<tr class="even">
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0.9167</td>
<td style="text-align: right;">0.7843</td>
</tr>
<tr class="odd">
<td style="text-align: right;">0.009</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0.75</td>
<td style="text-align: right;">0.8235</td>
</tr>
</tbody>
</table>
</div>
</div>
</figure>
</div>
</div>
<div id="fig-lr-top5" class="quarto-float quarto-figure quarto-figure-center anchored">
<figure class="quarto-float quarto-float-fig figure">
<div aria-describedby="fig-lr-top5-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<img src="../results/figures/LogisticRegression/most_discriminant_features.png" class="img-fluid figure-img" style="width:70.0%">
</div>
<figcaption class="quarto-float-caption-bottom quarto-float-caption quarto-float-fig" id="fig-lr-top5-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Figure&nbsp;6: Top 5 most discriminant features (upper and lower).
</figcaption>
</figure>
</div>
<p>In <a href="#fig-lr-cm" class="quarto-xref">Figure&nbsp;7</a> we can observe the confusion metrics and misses in the cross validation of the model. We can observe that the logistic regression is not particularly good at discriminating, since it is evidently favouring the “not hot dog” class, as we expected from the coefficients calculated. We can also see the patterns for the mismatches in <a href="#tbl-lr-mismatch" class="quarto-xref">Table&nbsp;3</a>. We can see the model failed identifying some of the “easy” catches we found previously, such as identifying blanks or keywords like “dog” which do not skew the balance enough in favour of the target class.</p>
<div id="fig-lr-cm" class="quarto-float quarto-figure quarto-figure-center anchored">
<figure class="quarto-float quarto-float-fig figure">
<div aria-describedby="fig-lr-cm-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<img src="../results/figures/LogisticRegression/train_confusion_matrix.png" class="img-fluid figure-img" style="width:70.0%">
</div>
<figcaption class="quarto-float-caption-bottom quarto-float-caption quarto-float-fig" id="fig-lr-cm-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Figure&nbsp;7: Confusion matrix for the Logistic Regression.
</figcaption>
</figure>
</div>
<div class="cell" data-execution_count="6">
<div id="tbl-lr-mismatch" class="cell quarto-float quarto-figure quarto-figure-center anchored" data-execution_count="6">
<figure class="quarto-float quarto-float-tbl figure">
<figcaption class="quarto-float-caption-top quarto-float-caption quarto-float-tbl" id="tbl-lr-mismatch-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Table&nbsp;3: Mismatches for Logistic Regression.
</figcaption>
<div aria-describedby="tbl-lr-mismatch-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<div class="cell-output cell-output-display cell-output-markdown" data-execution_count="49">
<table class="do-not-create-environment cell caption-top table table-sm table-striped small">
<colgroup>
<col style="width: 9%">
<col style="width: 12%">
<col style="width: 59%">
<col style="width: 18%">
</colgroup>
<thead>
<tr class="header">
<th style="text-align: left;">y</th>
<th style="text-align: left;">y_hat</th>
<th style="text-align: left;">probabilities</th>
<th style="text-align: left;">x</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">False</td>
<td style="text-align: left;">True</td>
<td style="text-align: left;">[0.48486372091146257, 0.5151362790885374]</td>
<td style="text-align: left;">Van Dog</td>
</tr>
<tr class="even">
<td style="text-align: left;">True</td>
<td style="text-align: left;">False</td>
<td style="text-align: left;">[0.5575291620674792, 0.4424708379325208]</td>
<td style="text-align: left;">nan</td>
</tr>
<tr class="odd">
<td style="text-align: left;">True</td>
<td style="text-align: left;">False</td>
<td style="text-align: left;">[0.5665436668638206, 0.43345633313617943]</td>
<td style="text-align: left;">nan</td>
</tr>
<tr class="even">
<td style="text-align: left;">True</td>
<td style="text-align: left;">False</td>
<td style="text-align: left;">[0.5665436668638206, 0.43345633313617943]</td>
<td style="text-align: left;">nan</td>
</tr>
<tr class="odd">
<td style="text-align: left;">True</td>
<td style="text-align: left;">False</td>
<td style="text-align: left;">[0.5951209415798449, 0.4048790584201552]</td>
<td style="text-align: left;">nan</td>
</tr>
<tr class="even">
<td style="text-align: left;">True</td>
<td style="text-align: left;">False</td>
<td style="text-align: left;">[0.5951209415798449, 0.4048790584201552]</td>
<td style="text-align: left;">nan</td>
</tr>
<tr class="odd">
<td style="text-align: left;">True</td>
<td style="text-align: left;">False</td>
<td style="text-align: left;">[0.5951209415798449, 0.4048790584201552]</td>
<td style="text-align: left;">nan</td>
</tr>
<tr class="even">
<td style="text-align: left;">True</td>
<td style="text-align: left;">False</td>
<td style="text-align: left;">[0.6011852449918378, 0.39881475500816216]</td>
<td style="text-align: left;">nan</td>
</tr>
<tr class="odd">
<td style="text-align: left;">True</td>
<td style="text-align: left;">False</td>
<td style="text-align: left;">[0.6011852449918378, 0.39881475500816216]</td>
<td style="text-align: left;">nan</td>
</tr>
<tr class="even">
<td style="text-align: left;">True</td>
<td style="text-align: left;">False</td>
<td style="text-align: left;">[0.6011852449918378, 0.39881475500816216]</td>
<td style="text-align: left;">Holy Smokes</td>
</tr>
<tr class="odd">
<td style="text-align: left;">True</td>
<td style="text-align: left;">False</td>
<td style="text-align: left;">[0.6011852449918378, 0.39881475500816216]</td>
<td style="text-align: left;">Mac BBQ</td>
</tr>
<tr class="even">
<td style="text-align: left;">True</td>
<td style="text-align: left;">False</td>
<td style="text-align: left;">[0.6048256520648894, 0.39517434793511064]</td>
<td style="text-align: left;">nan</td>
</tr>
<tr class="odd">
<td style="text-align: left;">True</td>
<td style="text-align: left;">False</td>
<td style="text-align: left;">[0.6048256520648894, 0.39517434793511064]</td>
<td style="text-align: left;">nan</td>
</tr>
<tr class="even">
<td style="text-align: left;">True</td>
<td style="text-align: left;">False</td>
<td style="text-align: left;">[0.6048256520648894, 0.39517434793511064]</td>
<td style="text-align: left;">nan</td>
</tr>
</tbody>
</table>
</div>
</div>
</figure>
</div>
</div>
</section>
<section id="naïve-bayes" class="level3">
<h3 class="anchored" data-anchor-id="naïve-bayes">Naïve-Bayes</h3>
<p>Finally we will be testing the Naïve-Bayes model, which is also a relatively simple model that also does not tend to over-fit as much, just to see which model is best. The cross validation scores and time are shown in <a href="#tbl-nb-cv" class="quarto-xref">Table&nbsp;4</a>. We can also see that it performs better than the tree and dummy with less overfit, although not very consistently, like the logistic regression.</p>
<div class="cell" data-execution_count="7">
<div id="tbl-nb-cv" class="cell quarto-float quarto-figure quarto-figure-center anchored" data-execution_count="7">
<figure class="quarto-float quarto-float-tbl figure">
<figcaption class="quarto-float-caption-top quarto-float-caption quarto-float-tbl" id="tbl-nb-cv-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Table&nbsp;4: Naïve-Bayes cross validation scores and times.
</figcaption>
<div aria-describedby="tbl-nb-cv-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<div class="cell-output cell-output-display cell-output-markdown" data-execution_count="50">
<table class="do-not-create-environment cell caption-top table table-sm table-striped small">
<thead>
<tr class="header">
<th style="text-align: right;">fit_time</th>
<th style="text-align: right;">score_time</th>
<th style="text-align: right;">test_score</th>
<th style="text-align: right;">train_score</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: right;">0.0079</td>
<td style="text-align: right;">0.0008</td>
<td style="text-align: right;">0.6923</td>
<td style="text-align: right;">0.8</td>
</tr>
<tr class="even">
<td style="text-align: right;">0.0012</td>
<td style="text-align: right;">0.0005</td>
<td style="text-align: right;">0.7692</td>
<td style="text-align: right;">0.82</td>
</tr>
<tr class="odd">
<td style="text-align: right;">0.001</td>
<td style="text-align: right;">0.0005</td>
<td style="text-align: right;">0.7692</td>
<td style="text-align: right;">0.82</td>
</tr>
<tr class="even">
<td style="text-align: right;">0.001</td>
<td style="text-align: right;">0.0005</td>
<td style="text-align: right;">0.9167</td>
<td style="text-align: right;">0.7843</td>
</tr>
<tr class="odd">
<td style="text-align: right;">0.001</td>
<td style="text-align: right;">0.0005</td>
<td style="text-align: right;">0.75</td>
<td style="text-align: right;">0.8235</td>
</tr>
</tbody>
</table>
</div>
</div>
</figure>
</div>
</div>
<p>Here we can observe the confusion metrics and misses in the cross validation of the model trained in <a href="#fig-nb-cm" class="quarto-xref">Figure&nbsp;8</a>. It performs quite similar to the logistic regression, as we can see is not particularly good at identifying hot dog features.</p>
<div id="fig-nb-cm" class="quarto-float quarto-figure quarto-figure-center anchored">
<figure class="quarto-float quarto-float-fig figure">
<div aria-describedby="fig-nb-cm-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<img src="../results/figures/NaiveBayes/train_confusion_matrix.png" class="img-fluid figure-img" style="width:70.0%">
</div>
<figcaption class="quarto-float-caption-bottom quarto-float-caption quarto-float-fig" id="fig-nb-cm-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Figure&nbsp;8: Confusion matrix for the Naïve-Bayes classifier.
</figcaption>
</figure>
</div>
<p>From the mismatches in <a href="#tbl-nb-mismatch" class="quarto-xref">Table&nbsp;5</a>, we see a similar pattern as the logistic regression, failing to identify the “obvious” patterns we stated in the beginning.</p>
<div class="cell" data-execution_count="8">
<div id="tbl-nb-mismatch" class="cell quarto-float quarto-figure quarto-figure-center anchored" data-execution_count="8">
<figure class="quarto-float quarto-float-tbl figure">
<figcaption class="quarto-float-caption-top quarto-float-caption quarto-float-tbl" id="tbl-nb-mismatch-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Table&nbsp;5: Mismatches for Naïve-Bayes.
</figcaption>
<div aria-describedby="tbl-nb-mismatch-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<div class="cell-output cell-output-display cell-output-markdown" data-execution_count="51">
<table class="do-not-create-environment cell caption-top table table-sm table-striped small">
<colgroup>
<col style="width: 9%">
<col style="width: 12%">
<col style="width: 59%">
<col style="width: 18%">
</colgroup>
<thead>
<tr class="header">
<th style="text-align: left;">y</th>
<th style="text-align: left;">y_hat</th>
<th style="text-align: left;">probabilities</th>
<th style="text-align: left;">x</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">False</td>
<td style="text-align: left;">True</td>
<td style="text-align: left;">[0.3642228229895249, 0.6357771770104746]</td>
<td style="text-align: left;">Van Dog</td>
</tr>
<tr class="even">
<td style="text-align: left;">True</td>
<td style="text-align: left;">False</td>
<td style="text-align: left;">[0.6544133650223363, 0.34558663497766406]</td>
<td style="text-align: left;">nan</td>
</tr>
<tr class="odd">
<td style="text-align: left;">True</td>
<td style="text-align: left;">False</td>
<td style="text-align: left;">[0.6839649670539567, 0.3160350329460436]</td>
<td style="text-align: left;">nan</td>
</tr>
<tr class="even">
<td style="text-align: left;">True</td>
<td style="text-align: left;">False</td>
<td style="text-align: left;">[0.6839649670539567, 0.3160350329460436]</td>
<td style="text-align: left;">nan</td>
</tr>
<tr class="odd">
<td style="text-align: left;">True</td>
<td style="text-align: left;">False</td>
<td style="text-align: left;">[0.7066548087250116, 0.29334519127498854]</td>
<td style="text-align: left;">nan</td>
</tr>
<tr class="even">
<td style="text-align: left;">True</td>
<td style="text-align: left;">False</td>
<td style="text-align: left;">[0.7066548087250116, 0.29334519127498854]</td>
<td style="text-align: left;">nan</td>
</tr>
<tr class="odd">
<td style="text-align: left;">True</td>
<td style="text-align: left;">False</td>
<td style="text-align: left;">[0.7066548087250116, 0.29334519127498854]</td>
<td style="text-align: left;">nan</td>
</tr>
<tr class="even">
<td style="text-align: left;">True</td>
<td style="text-align: left;">False</td>
<td style="text-align: left;">[0.7247833230416214, 0.27521667695837865]</td>
<td style="text-align: left;">nan</td>
</tr>
<tr class="odd">
<td style="text-align: left;">True</td>
<td style="text-align: left;">False</td>
<td style="text-align: left;">[0.7247833230416214, 0.27521667695837865]</td>
<td style="text-align: left;">nan</td>
</tr>
<tr class="even">
<td style="text-align: left;">True</td>
<td style="text-align: left;">False</td>
<td style="text-align: left;">[0.7247833230416214, 0.27521667695837865]</td>
<td style="text-align: left;">Holy Smokes</td>
</tr>
<tr class="odd">
<td style="text-align: left;">True</td>
<td style="text-align: left;">False</td>
<td style="text-align: left;">[0.7247833230416214, 0.27521667695837865]</td>
<td style="text-align: left;">Mac BBQ</td>
</tr>
<tr class="even">
<td style="text-align: left;">True</td>
<td style="text-align: left;">False</td>
<td style="text-align: left;">[0.7834187709904163, 0.21658122900958396]</td>
<td style="text-align: left;">nan</td>
</tr>
<tr class="odd">
<td style="text-align: left;">True</td>
<td style="text-align: left;">False</td>
<td style="text-align: left;">[0.7834187709904163, 0.21658122900958396]</td>
<td style="text-align: left;">nan</td>
</tr>
<tr class="even">
<td style="text-align: left;">True</td>
<td style="text-align: left;">False</td>
<td style="text-align: left;">[0.7834187709904163, 0.21658122900958396]</td>
<td style="text-align: left;">nan</td>
</tr>
</tbody>
</table>
</div>
</div>
</figure>
</div>
</div>
</section>
<section id="model-comparisons" class="level3">
<h3 class="anchored" data-anchor-id="model-comparisons">Model Comparisons</h3>
<p>Knowing this, we can compare their scores to determine the model to train. As shown in table 14, we can see a negligible difference between Naïve-Bayes and LR. Yet, to be able to proceed, we will proceed train Naïve-Bayes classifier, as it is also a relatively simple model with slighlty faster fitting time.</p>
<p>table 14: Comparisons of mean values of scores and times for all models.</p>
</section>
<section id="best-model-hyperparameter-optimisation" class="level3">
<h3 class="anchored" data-anchor-id="best-model-hyperparameter-optimisation">Best Model Hyperparameter Optimisation</h3>
<p>Here we will perform the optimisation of our model. Given that we chose the Naïve-Bayes estimator, we will optimise the <code>alpha</code> hyperparameter (which controls the tradeoff between variance and bias of our model), as well as the <code>max_features</code> variable (the actual size of our vocabulary considering the top <code>max_features</code> words) of our <code>CountVectorizer</code>, as this can also play a role in overfitting.</p>
<p>We are using a randomised approach to test in a wide space, with 500 iterations and a random integer ranging from <span class="math inline">\([5, \text{size of the vocabulary}]\)</span> for <code>max_features</code>, and a loguniform distribution ranging from <span class="math inline">\([0.001, 1000]\)</span> for <code>alpha</code>.</p>
<p>After this, we will use the best parameters obtained, and train our best model. The best hyperparameters for the best model is shown in table 15.</p>
<p>Table 15: Best hyperparameters for the best model (Logistic Regression).</p>
<p>We can observe a slight increase in the validation score, but in order to prevent overfitting on the validation set, we will compare our model with the actual test data:</p>
<p><strong>insert test score here of 0.714</strong></p>
<p>The model performs quite similar to the validation score, which likely tells us that it was able to generalise and learn. In order to validate this assumption, we can take a look at the confusion matrix. In figure 9, we can see that, although the model makes good predictions, it still fails to raise the “hot dog alert”. In table 16, we can further see the failed classifications. Save for the first one, which we would even classify as a hot dog stand, it still missed some of the cues we identified at the beginning, meaning this model will probably will encounter this limitations in future predictions.</p>
<p>Fig. 9: Confusion matrix for the best classifier</p>
<p>Table 16: Mismatches for best model.</p>
</section>
</section>
<section id="discussion" class="level1">
<h1>Discussion</h1>
<p>We compared the performance of 4 different models (Dummy, Decision Tree, Logistic Regression, and Naive-Bayes), and we proceeded with Naive-Bayes, therefore, we chose Naive-Bayes to move forward with hyperparameter tuning. We used RandomizedSearchCV to identify the best hyperparameter values for Max Features and alpha, and evaluated the best model with the test set.</p>
<p>As we saw, there are several limitations to what a count vectorizer and a binary classification can perform. The relationships that we found within our variables are probably not linear, as there are some cases where the biases of our more intelligent classifiers, such as the Bayesian and the logistic regression, would favor into classifying something as not hotdog, when we noticed from our EDA that it was those specific cases of no name where the model should have predicted that that was hotdog stand. This makes for a model that will be particularly good at identifying the majority class, which pretty much makes it comparable to a dummy. And thus, we observed the limitations of of our current estimators.</p>
<p>Now, depending on the context of our problem, we may lean in favour of having a model that is really good at predicting when something is not a hotdog, versus wanting a model that is really good at predicting when something is a hotdog.</p>
<p>Let’s say we have someone who doesn’t really like hot dogs that much. We would prefer a model that probably outputs more consistently or classifies non-hot dog places as non-hot dog places where this default probably like opens up possibilities for someone looking for options that are likely not hot dog related. And it is not too terrible if hot dog place slides in given that it is the fewer of the bunch.</p>
<p>For that particular case, our model probably is the one fitting better into that narrative as it is consistent enough to determining or correctly classifying the null class even though if it’s not as good as classifying the positive class.</p>
<p>Now, in the context of someone really craving a hot dog and wanting to be very sure that that is a hot dog place, then probably the best model that we trained will not fit into that description as much, since it’s not particularly good into predicting a class. For that case, it would have been better to train probably a decision tree, which we saw had much higher bias into identifying the hot dog class.</p>
<p>A test accuracy of 0.71 shows that our model is still a work in progress, but it shows promising results from the confusion matrix, where it only has 1 FP. There are also 6 FN, as that is a byproduct of how the model learned the patterns.</p>
<p>Some challenges in the data set are the size. It is a small dataset with only ~90 entries. Another challenge is the imbalance of classes. It would be ideal if each class would represent roughly 50–50% of the samples. We believe that the imbalance was not severe, so we didn’t make any adjustments. In the future, we can take the argument “class_weight” into account during hyperparameter tuning for a model that supports it.</p>
<p>Finally, we could also add for future iterations, or as a different research question, whether an SVM would perform better given the conditions we have mentioned. It is likely that a nonlinear model will likely fare better since we have found some instances where the natural bias of logistic regression and Naïve-Bayes have pushed the model to incorrectly classify some of the examples.</p>
</section>
<section id="references" class="level1 unnumbered">


</section>

<div id="quarto-appendix" class="default"><section class="quarto-appendix-contents" role="doc-bibliography" id="quarto-bibliography"><h2 class="anchored quarto-appendix-heading">References</h2><div id="refs" class="references csl-bib-body hanging-indent" data-entry-spacing="0" role="list">
<div id="ref-CityOfVancouverOpenData" class="csl-entry" role="listitem">
Vancouver, City of. 2025a. <span>“City of Vancouver Open Data Portal.”</span> <a href="https://opendata.vancouver.ca/pages/home/">https://opendata.vancouver.ca/pages/home/</a>.
</div>
<div id="ref-CityOfVancouverStreetFood" class="csl-entry" role="listitem">
———. 2025b. <span>“Street Food Stationary Vending Permits.”</span> <a href="https://vancouver.ca/doing-business/selling-food-on-vancouver-s-streets.aspx">https://vancouver.ca/doing-business/selling-food-on-vancouver-s-streets.aspx</a>.
</div>
<div id="ref-W3SchoolsCSSColors" class="csl-entry" role="listitem">
W3Schools. 2025. <span>“CSS Colors.”</span> <a href="https://www.w3schools.com/cssref/css_colors.php">https://www.w3schools.com/cssref/css_colors.php</a>.
</div>
</div></section></div></main>
<!-- /main column -->
<script id="quarto-html-after-body" type="application/javascript">
  window.document.addEventListener("DOMContentLoaded", function (event) {
    const icon = "";
    const anchorJS = new window.AnchorJS();
    anchorJS.options = {
      placement: 'right',
      icon: icon
    };
    anchorJS.add('.anchored');
    const isCodeAnnotation = (el) => {
      for (const clz of el.classList) {
        if (clz.startsWith('code-annotation-')) {                     
          return true;
        }
      }
      return false;
    }
    const onCopySuccess = function(e) {
      // button target
      const button = e.trigger;
      // don't keep focus
      button.blur();
      // flash "checked"
      button.classList.add('code-copy-button-checked');
      var currentTitle = button.getAttribute("title");
      button.setAttribute("title", "Copied!");
      let tooltip;
      if (window.bootstrap) {
        button.setAttribute("data-bs-toggle", "tooltip");
        button.setAttribute("data-bs-placement", "left");
        button.setAttribute("data-bs-title", "Copied!");
        tooltip = new bootstrap.Tooltip(button, 
          { trigger: "manual", 
            customClass: "code-copy-button-tooltip",
            offset: [0, -8]});
        tooltip.show();    
      }
      setTimeout(function() {
        if (tooltip) {
          tooltip.hide();
          button.removeAttribute("data-bs-title");
          button.removeAttribute("data-bs-toggle");
          button.removeAttribute("data-bs-placement");
        }
        button.setAttribute("title", currentTitle);
        button.classList.remove('code-copy-button-checked');
      }, 1000);
      // clear code selection
      e.clearSelection();
    }
    const getTextToCopy = function(trigger) {
        const codeEl = trigger.previousElementSibling.cloneNode(true);
        for (const childEl of codeEl.children) {
          if (isCodeAnnotation(childEl)) {
            childEl.remove();
          }
        }
        return codeEl.innerText;
    }
    const clipboard = new window.ClipboardJS('.code-copy-button:not([data-in-quarto-modal])', {
      text: getTextToCopy
    });
    clipboard.on('success', onCopySuccess);
    if (window.document.getElementById('quarto-embedded-source-code-modal')) {
      const clipboardModal = new window.ClipboardJS('.code-copy-button[data-in-quarto-modal]', {
        text: getTextToCopy,
        container: window.document.getElementById('quarto-embedded-source-code-modal')
      });
      clipboardModal.on('success', onCopySuccess);
    }
      var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
      var mailtoRegex = new RegExp(/^mailto:/);
        var filterRegex = new RegExp('/' + window.location.host + '/');
      var isInternal = (href) => {
          return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
      }
      // Inspect non-navigation links and adorn them if external
     var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool):not(.about-link)');
      for (var i=0; i<links.length; i++) {
        const link = links[i];
        if (!isInternal(link.href)) {
          // undo the damage that might have been done by quarto-nav.js in the case of
          // links that we want to consider external
          if (link.dataset.originalHref !== undefined) {
            link.href = link.dataset.originalHref;
          }
        }
      }
    function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
      const config = {
        allowHTML: true,
        maxWidth: 500,
        delay: 100,
        arrow: false,
        appendTo: function(el) {
            return el.parentElement;
        },
        interactive: true,
        interactiveBorder: 10,
        theme: 'quarto',
        placement: 'bottom-start',
      };
      if (contentFn) {
        config.content = contentFn;
      }
      if (onTriggerFn) {
        config.onTrigger = onTriggerFn;
      }
      if (onUntriggerFn) {
        config.onUntrigger = onUntriggerFn;
      }
      window.tippy(el, config); 
    }
    const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
    for (var i=0; i<noterefs.length; i++) {
      const ref = noterefs[i];
      tippyHover(ref, function() {
        // use id or data attribute instead here
        let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
        try { href = new URL(href).hash; } catch {}
        const id = href.replace(/^#\/?/, "");
        const note = window.document.getElementById(id);
        if (note) {
          return note.innerHTML;
        } else {
          return "";
        }
      });
    }
    const xrefs = window.document.querySelectorAll('a.quarto-xref');
    const processXRef = (id, note) => {
      // Strip column container classes
      const stripColumnClz = (el) => {
        el.classList.remove("page-full", "page-columns");
        if (el.children) {
          for (const child of el.children) {
            stripColumnClz(child);
          }
        }
      }
      stripColumnClz(note)
      if (id === null || id.startsWith('sec-')) {
        // Special case sections, only their first couple elements
        const container = document.createElement("div");
        if (note.children && note.children.length > 2) {
          container.appendChild(note.children[0].cloneNode(true));
          for (let i = 1; i < note.children.length; i++) {
            const child = note.children[i];
            if (child.tagName === "P" && child.innerText === "") {
              continue;
            } else {
              container.appendChild(child.cloneNode(true));
              break;
            }
          }
          if (window.Quarto?.typesetMath) {
            window.Quarto.typesetMath(container);
          }
          return container.innerHTML
        } else {
          if (window.Quarto?.typesetMath) {
            window.Quarto.typesetMath(note);
          }
          return note.innerHTML;
        }
      } else {
        // Remove any anchor links if they are present
        const anchorLink = note.querySelector('a.anchorjs-link');
        if (anchorLink) {
          anchorLink.remove();
        }
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(note);
        }
        if (note.classList.contains("callout")) {
          return note.outerHTML;
        } else {
          return note.innerHTML;
        }
      }
    }
    for (var i=0; i<xrefs.length; i++) {
      const xref = xrefs[i];
      tippyHover(xref, undefined, function(instance) {
        instance.disable();
        let url = xref.getAttribute('href');
        let hash = undefined; 
        if (url.startsWith('#')) {
          hash = url;
        } else {
          try { hash = new URL(url).hash; } catch {}
        }
        if (hash) {
          const id = hash.replace(/^#\/?/, "");
          const note = window.document.getElementById(id);
          if (note !== null) {
            try {
              const html = processXRef(id, note.cloneNode(true));
              instance.setContent(html);
            } finally {
              instance.enable();
              instance.show();
            }
          } else {
            // See if we can fetch this
            fetch(url.split('#')[0])
            .then(res => res.text())
            .then(html => {
              const parser = new DOMParser();
              const htmlDoc = parser.parseFromString(html, "text/html");
              const note = htmlDoc.getElementById(id);
              if (note !== null) {
                const html = processXRef(id, note);
                instance.setContent(html);
              } 
            }).finally(() => {
              instance.enable();
              instance.show();
            });
          }
        } else {
          // See if we can fetch a full url (with no hash to target)
          // This is a special case and we should probably do some content thinning / targeting
          fetch(url)
          .then(res => res.text())
          .then(html => {
            const parser = new DOMParser();
            const htmlDoc = parser.parseFromString(html, "text/html");
            const note = htmlDoc.querySelector('main.content');
            if (note !== null) {
              // This should only happen for chapter cross references
              // (since there is no id in the URL)
              // remove the first header
              if (note.children.length > 0 && note.children[0].tagName === "HEADER") {
                note.children[0].remove();
              }
              const html = processXRef(null, note);
              instance.setContent(html);
            } 
          }).finally(() => {
            instance.enable();
            instance.show();
          });
        }
      }, function(instance) {
      });
    }
        let selectedAnnoteEl;
        const selectorForAnnotation = ( cell, annotation) => {
          let cellAttr = 'data-code-cell="' + cell + '"';
          let lineAttr = 'data-code-annotation="' +  annotation + '"';
          const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
          return selector;
        }
        const selectCodeLines = (annoteEl) => {
          const doc = window.document;
          const targetCell = annoteEl.getAttribute("data-target-cell");
          const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
          const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
          const lines = annoteSpan.getAttribute("data-code-lines").split(",");
          const lineIds = lines.map((line) => {
            return targetCell + "-" + line;
          })
          let top = null;
          let height = null;
          let parent = null;
          if (lineIds.length > 0) {
              //compute the position of the single el (top and bottom and make a div)
              const el = window.document.getElementById(lineIds[0]);
              top = el.offsetTop;
              height = el.offsetHeight;
              parent = el.parentElement.parentElement;
            if (lineIds.length > 1) {
              const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
              const bottom = lastEl.offsetTop + lastEl.offsetHeight;
              height = bottom - top;
            }
            if (top !== null && height !== null && parent !== null) {
              // cook up a div (if necessary) and position it 
              let div = window.document.getElementById("code-annotation-line-highlight");
              if (div === null) {
                div = window.document.createElement("div");
                div.setAttribute("id", "code-annotation-line-highlight");
                div.style.position = 'absolute';
                parent.appendChild(div);
              }
              div.style.top = top - 2 + "px";
              div.style.height = height + 4 + "px";
              div.style.left = 0;
              let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
              if (gutterDiv === null) {
                gutterDiv = window.document.createElement("div");
                gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
                gutterDiv.style.position = 'absolute';
                const codeCell = window.document.getElementById(targetCell);
                const gutter = codeCell.querySelector('.code-annotation-gutter');
                gutter.appendChild(gutterDiv);
              }
              gutterDiv.style.top = top - 2 + "px";
              gutterDiv.style.height = height + 4 + "px";
            }
            selectedAnnoteEl = annoteEl;
          }
        };
        const unselectCodeLines = () => {
          const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
          elementsIds.forEach((elId) => {
            const div = window.document.getElementById(elId);
            if (div) {
              div.remove();
            }
          });
          selectedAnnoteEl = undefined;
        };
          // Handle positioning of the toggle
      window.addEventListener(
        "resize",
        throttle(() => {
          elRect = undefined;
          if (selectedAnnoteEl) {
            selectCodeLines(selectedAnnoteEl);
          }
        }, 10)
      );
      function throttle(fn, ms) {
      let throttle = false;
      let timer;
        return (...args) => {
          if(!throttle) { // first call gets through
              fn.apply(this, args);
              throttle = true;
          } else { // all the others get throttled
              if(timer) clearTimeout(timer); // cancel #2
              timer = setTimeout(() => {
                fn.apply(this, args);
                timer = throttle = false;
              }, ms);
          }
        };
      }
        // Attach click handler to the DT
        const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
        for (const annoteDlNode of annoteDls) {
          annoteDlNode.addEventListener('click', (event) => {
            const clickedEl = event.target;
            if (clickedEl !== selectedAnnoteEl) {
              unselectCodeLines();
              const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
              if (activeEl) {
                activeEl.classList.remove('code-annotation-active');
              }
              selectCodeLines(clickedEl);
              clickedEl.classList.add('code-annotation-active');
            } else {
              // Unselect the line
              unselectCodeLines();
              clickedEl.classList.remove('code-annotation-active');
            }
          });
        }
    const findCites = (el) => {
      const parentEl = el.parentElement;
      if (parentEl) {
        const cites = parentEl.dataset.cites;
        if (cites) {
          return {
            el,
            cites: cites.split(' ')
          };
        } else {
          return findCites(el.parentElement)
        }
      } else {
        return undefined;
      }
    };
    var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
    for (var i=0; i<bibliorefs.length; i++) {
      const ref = bibliorefs[i];
      const citeInfo = findCites(ref);
      if (citeInfo) {
        tippyHover(citeInfo.el, function() {
          var popup = window.document.createElement('div');
          citeInfo.cites.forEach(function(cite) {
            var citeDiv = window.document.createElement('div');
            citeDiv.classList.add('hanging-indent');
            citeDiv.classList.add('csl-entry');
            var biblioDiv = window.document.getElementById('ref-' + cite);
            if (biblioDiv) {
              citeDiv.innerHTML = biblioDiv.innerHTML;
            }
            popup.appendChild(citeDiv);
          });
          return popup.innerHTML;
        });
      }
    }
  });
  </script>
</div> <!-- /content -->




</body></html>